"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1694],{1694:(z,d,c)=>{c.r(d),c.d(d,{CafeteriaPageModule:()=>D});var o=c(5056),m=c(7885),u=c(6895),h=c(4006),f=c(6753),Z=c(9671),g=c(4964),e=c(6353),_=c(6799);function x(t,i){if(1&t&&(e.TgZ(0,"ion-item",6)(1,"ion-label")(2,"h2")(3,"p",7),e._uU(4),e.qZA()(),e.TgZ(5,"p",8),e._uU(6),e.qZA()()()),2&t){const n=i.$implicit,a=i.index,r=e.oxw(2);e.Q6J("lines",a<r.breakfastMenuList.length-1?"inset":"none"),e.xp6(4),e.Oqu(n.menu),e.xp6(2),e.hij("\u20a9 ",n.price,"")}}function M(t,i){if(1&t&&(e.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,x,7,3,"ion-item",5),e.qZA()),2&t){const n=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"cafeteria.type.breakfast")),e.xp6(2),e.Q6J("ngForOf",n.breakfastMenuList)}}function T(t,i){if(1&t&&(e.TgZ(0,"ion-item",6)(1,"ion-label")(2,"h2")(3,"p",7),e._uU(4),e.qZA()(),e.TgZ(5,"p",8),e._uU(6),e.qZA()()()),2&t){const n=i.$implicit,a=i.index,r=e.oxw(2);e.Q6J("lines",a<r.lunchMenuList.length-1?"inset":"none"),e.xp6(4),e.Oqu(n.menu),e.xp6(2),e.hij("\u20a9 ",n.price,"")}}function A(t,i){if(1&t&&(e.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,T,7,3,"ion-item",5),e.qZA()),2&t){const n=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"cafeteria.type.lunch")),e.xp6(2),e.Q6J("ngForOf",n.lunchMenuList)}}function k(t,i){if(1&t&&(e.TgZ(0,"ion-item",6)(1,"ion-label")(2,"h2")(3,"p",7),e._uU(4),e.qZA()(),e.TgZ(5,"p",8),e._uU(6),e.qZA()()()),2&t){const n=i.$implicit,a=i.index,r=e.oxw(2);e.Q6J("lines",a<r.dinnerMenuList.length-1?"inset":"none"),e.xp6(4),e.Oqu(n.menu),e.xp6(2),e.hij("\u20a9 ",n.price,"")}}function y(t,i){if(1&t&&(e.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,k,7,3,"ion-item",5),e.qZA()),2&t){const n=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"cafeteria.type.dinner")),e.xp6(2),e.Q6J("ngForOf",n.dinnerMenuList)}}function I(t,i){if(1&t&&(e.TgZ(0,"ion-item",6)(1,"ion-label")(2,"h2")(3,"p",7),e._uU(4),e.qZA()(),e.TgZ(5,"p",8),e._uU(6),e.qZA()()()),2&t){const n=i.$implicit,a=i.index,r=e.oxw(2);e.Q6J("lines",a<r.lunchAndDinnerMenuList.length-1?"inset":"none"),e.xp6(4),e.Oqu(n.menu),e.xp6(2),e.hij("\u20a9 ",n.price,"")}}function P(t,i){if(1&t&&(e.TgZ(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,I,7,3,"ion-item",5),e.qZA()),2&t){const n=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"cafeteria.type.lunchAndDinner")),e.xp6(2),e.Q6J("ngForOf",n.lunchAndDinnerMenuList)}}function v(t,i){1&t&&(e.TgZ(0,"ion-list",9)(1,"ion-item")(2,"ion-label")(3,"h2")(4,"p",7),e._uU(5),e.ALo(6,"translate"),e.qZA()()()()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"cafeteria.out_of_service")))}function O(t,i){1&t&&e._UZ(0,"ion-icon",10)}function L(t,i){1&t&&e._UZ(0,"ion-icon",11)}let N=(()=>{class t{constructor(n,a){this.cafeteriaService=n,this.translateService=a,this.breakfastMenuList=[],this.lunchMenuList=[],this.dinnerMenuList=[],this.lunchAndDinnerMenuList=[],this.cafeteriaService.menuList.subscribe(r=>{let s=r.find(l=>l.cafeteriaName===this.getCafeteriaName());s&&(this.breakfastMenuList=s.menu.filter(l=>"\uc870\uc2dd"===l.timeType),this.lunchMenuList=s.menu.filter(l=>"\uc911\uc2dd"===l.timeType),this.dinnerMenuList=s.menu.filter(l=>"\uc11d\uc2dd"===l.timeType),this.lunchAndDinnerMenuList=s.menu.filter(l=>"\uc911\uc2dd/\uc11d\uc2dd"===l.timeType))})}isBookmarked(){return localStorage.getItem("bookmark.cafeteria.index")===this.cafeteriaIndex.toString()}addBookmark(){console.log("addBookmark"),localStorage.setItem("bookmark.cafeteria.index",this.cafeteriaIndex.toString())}removeBookmark(){localStorage.removeItem("bookmark.cafeteria.index")}getCafeteriaName(){switch(this.cafeteriaName){case"student":return"\ud559\uc0dd\uc2dd\ub2f9";case"faculty":return"\uad50\uc9c1\uc6d0\uc2dd\ub2f9";case"dormitory":return"\ucc3d\uc758\uc778\uc7ac\uc6d0\uc2dd\ub2f9";case"food-court":return"\ud478\ub4dc\ucf54\ud2b8";case"foundation":return"\ucc3d\uc5c5\ubcf4\uc721\uc13c\ud130"}}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(_.m),e.Y36(f.sK))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-cafeteria-card"]],inputs:{cafeteriaName:"cafeteriaName",cafeteriaIndex:"cafeteriaIndex"},decls:14,vars:10,consts:[[4,"ngIf"],["lines","none",4,"ngIf"],["fill","clear",3,"click"],["slot","icon-only","name","bookmark-outline",4,"ngIf"],["slot","icon-only","name","bookmark","color","primary",4,"ngIf"],[3,"lines",4,"ngFor","ngForOf"],[3,"lines"],[1,"menu"],[1,"price"],["lines","none"],["slot","icon-only","name","bookmark-outline"],["slot","icon-only","name","bookmark","color","primary"]],template:function(n,a){1&n&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"ion-card-content"),e.YNc(6,M,6,4,"ion-list",0),e.YNc(7,A,6,4,"ion-list",0),e.YNc(8,y,6,4,"ion-list",0),e.YNc(9,P,6,4,"ion-list",0),e.YNc(10,v,7,3,"ion-list",1),e.qZA(),e.TgZ(11,"ion-button",2),e.NdJ("click",function(){return a.isBookmarked()?a.removeBookmark():a.addBookmark()}),e.YNc(12,O,1,0,"ion-icon",3),e.YNc(13,L,1,0,"ion-icon",4),e.qZA()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,8,"cafeteria.name."+a.cafeteriaName)),e.xp6(3),e.Q6J("ngIf",a.breakfastMenuList.length>0),e.xp6(1),e.Q6J("ngIf",a.lunchMenuList.length>0),e.xp6(1),e.Q6J("ngIf",a.dinnerMenuList.length>0),e.xp6(1),e.Q6J("ngIf",a.lunchAndDinnerMenuList.length>0),e.xp6(1),e.Q6J("ngIf",0===a.breakfastMenuList.length&&0===a.lunchMenuList.length&&0===a.dinnerMenuList.length&&0===a.lunchAndDinnerMenuList.length),e.xp6(2),e.Q6J("ngIf",!a.isBookmarked()),e.xp6(1),e.Q6J("ngIf",a.isBookmarked()))},dependencies:[o.YG,o.PM,o.FN,o.Zi,o.Dq,o.gu,o.Ie,o.Q$,o.q_,o.yh,u.sg,u.O5,f.X$],styles:["ion-card[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:large}ion-list[_ngcontent-%COMP%]{width:100%}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{padding-left:0}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-align:start;font-size:large;margin-top:5px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--inner-padding-end: 0;--min-height: 16px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{white-space:normal}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{margin-top:5px;font-weight:700;color:var(--ion-color-secondary-contrast)}"]}),t})();var p=c(9632);function q(t,i){1&t&&(e.TgZ(0,"div",6),e._UZ(1,"app-cafeteria-card",7),e.qZA())}function b(t,i){1&t&&(e.TgZ(0,"div",6),e._UZ(1,"app-cafeteria-card",8),e.qZA())}function S(t,i){1&t&&(e.TgZ(0,"div",6),e._UZ(1,"app-cafeteria-card",9),e.qZA())}function w(t,i){1&t&&(e.TgZ(0,"div",6),e._UZ(1,"app-cafeteria-card",10),e.qZA())}function U(t,i){1&t&&(e.TgZ(0,"div",6),e._UZ(1,"app-cafeteria-card",11),e.qZA())}const Y=g.Ps`
  query GetCafeteriaMenu($campusID: Int!) {
    cafeteria(campusId: $campusID) {
      cafeteriaId, cafeteriaName, menu {
        timeType, menu, price
      }
    }
  }
`;let C=(()=>{class t{constructor(n,a,r,s){this.apollo=n,this.cafeteriaService=a,this.toastController=r,this.translateService=s,this.cafeteriaIDList=["student","faculty","food-court","foundation","dormitory"]}ngOnInit(){this.cafeteriaMenuQuery=this.apollo.watchQuery({query:Y,variables:{campusID:1}}),this.cafeteriaMenuSubscription=this.cafeteriaMenuQuery.valueChanges.subscribe(({data:n})=>{this.cafeteriaService.setMenuList(n.cafeteria)}),localStorage.getItem("bookmark.cafeteria.index")&&this.showFavoriteCafeteriaToast(parseInt(localStorage.getItem("bookmark.cafeteria.index"))).then()}setSwiperInstance(n){this.swiper=n,localStorage.getItem("bookmark.cafeteria.index")&&this.swiper.slideTo(parseInt(localStorage.getItem("bookmark.cafeteria.index")))}showFavoriteCafeteriaToast(n){var a=this;return(0,Z.Z)(function*(){yield(yield a.toastController.create({message:a.translateService.instant("cafeteria.favorite",{name:a.translateService.instant("cafeteria.name."+a.cafeteriaIDList[n])}),buttons:[{text:a.translateService.instant("OK"),role:"cancel"}],cssClass:"toast-favorite-cafeteria",duration:1500})).present()})()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(g._M),e.Y36(_.m),e.Y36(o.yF),e.Y36(f.sK))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-cafeteria"]],decls:17,vars:8,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["slidesPerView","1.2","centeredSlides","centeredSlides",3,"swiper"],["swiperSlide",""],[1,"slide-content"],["cafeteriaName","student","cafeteriaIndex","0"],["cafeteriaName","faculty","cafeteriaIndex","1"],["cafeteriaName","food-court","cafeteriaIndex","2"],["cafeteriaName","foundation","cafeteriaIndex","3"],["cafeteriaName","dormitory","cafeteriaIndex","4"]],template:function(n,a){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"ion-content",1)(6,"ion-header",2)(7,"ion-toolbar")(8,"ion-title",3),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"swiper",4),e.NdJ("swiper",function(s){return a.setSwiperInstance(s)}),e.YNc(12,q,2,0,"ng-template",5),e.YNc(13,b,2,0,"ng-template",5),e.YNc(14,S,2,0,"ng-template",5),e.YNc(15,w,2,0,"ng-template",5),e.YNc(16,U,2,0,"ng-template",5),e.qZA()()),2&n&&(e.Q6J("translucent",!0),e.xp6(3),e.hij(" ",e.lcZ(4,4,"cafeteria.title")," "),e.xp6(2),e.Q6J("fullscreen",!0),e.xp6(4),e.Oqu(e.lcZ(10,6,"cafeteria.title")))},dependencies:[o.W2,o.Gu,o.wd,o.sr,N,p.nF,p.YC,f.X$]}),t})();var J=c(581);const Q=[{path:"",component:C}];let F=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(Q),m.Bz]}),t})(),B=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[o.Pc,u.ez,f.aw]}),t})(),D=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[o.Pc,u.ez,h.u5,f.aw,J.e,m.Bz.forChild([{path:"",component:C}]),F,B,p.kz]}),t})()}}]);