"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7167],{7167:($,g,u)=>{u.r(g),u.d(g,{SubwayModule:()=>J});var o=u(5056),l=u(6895),y=u(4006),f=u(581),p=u(7885),d=u(4964),e=u(6353),w=u(9387),_=u(4471),m=u(6753);const c=function(n){return{destination:n}},b=function(n,i,t){return{minute:n,currentStation:i,status:t}};function x(n,i){if(1&n&&(e.TgZ(0,"ion-item")(1,"div",5)(2,"ion-text"),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"ion-text"),e._uU(7),e.ALo(8,"translate"),e.qZA()()()),2&n){const t=i.$implicit,a=e.oxw(2);e.xp6(3),e.Oqu(e.xi3(4,2,"subway.realtime.heading",e.VKq(10,c,e.lcZ(5,5,"subway.destination."+a.getSubwayDestination(t.terminalStation))))),e.xp6(4),e.Oqu(e.xi3(8,7,"subway.realtime.item.sub",e.kEZ(12,b,t.remainedTime,t.currentStation,t.status)))}}function S(n,i){if(1&n&&e.YNc(0,x,9,16,"ion-item",4),2&n){const t=e.oxw();e.Q6J("ngForOf",t.subwayRealtimeItems.up.slice(0,5))}}const h=function(n,i){return{hour:n,minute:i}};function C(n,i){if(1&n&&(e.TgZ(0,"ion-item")(1,"div",5)(2,"ion-text"),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"ion-text"),e._uU(7),e.ALo(8,"translate"),e.qZA()()()),2&n){const t=i.$implicit,a=e.oxw(2);e.xp6(3),e.Oqu(e.xi3(4,2,"subway.realtime.heading",e.VKq(10,c,e.lcZ(5,5,"subway.destination."+a.getSubwayDestination(t.terminalStation))))),e.xp6(4),e.Oqu(e.xi3(8,7,"subway.timetable.item",e.WLB(12,h,t.departureTime.split(":")[0],t.departureTime.split(":")[1])))}}function T(n,i){if(1&n&&e.YNc(0,C,9,15,"ion-item",4),2&n){const t=e.oxw();e.Q6J("ngForOf",t.subwayTimetableItems.up.slice(0,5-t.subwayRealtimeItems.up.length))}}function I(n,i){1&n&&(e.TgZ(0,"ion-item",0)(1,"ion-label",6),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"shuttle.out_of_service")))}function O(n,i){if(1&n&&(e.TgZ(0,"ion-item")(1,"div",5)(2,"ion-text"),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"ion-text"),e._uU(7),e.ALo(8,"translate"),e.qZA()()()),2&n){const t=i.$implicit,a=e.oxw(2);e.xp6(3),e.Oqu(e.xi3(4,2,"subway.realtime.heading",e.VKq(10,c,e.lcZ(5,5,"subway.destination."+a.getSubwayDestination(t.terminalStation))))),e.xp6(4),e.Oqu(e.xi3(8,7,"subway.realtime.item.sub",e.kEZ(12,b,t.remainedTime,t.currentStation,t.status)))}}function Z(n,i){if(1&n&&e.YNc(0,O,9,16,"ion-item",4),2&n){const t=e.oxw();e.Q6J("ngForOf",t.subwayRealtimeItems.down.slice(0,5))}}function M(n,i){if(1&n&&(e.TgZ(0,"ion-item")(1,"div",5)(2,"ion-text"),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"ion-text"),e._uU(7),e.ALo(8,"translate"),e.qZA()()()),2&n){const t=i.$implicit,a=e.oxw(2);e.xp6(3),e.Oqu(e.xi3(4,2,"subway.realtime.heading",e.VKq(10,c,e.lcZ(5,5,"subway.destination."+a.getSubwayDestination(t.terminalStation))))),e.xp6(4),e.Oqu(e.xi3(8,7,"subway.timetable.item",e.WLB(12,h,t.departureTime.split(":")[0],t.departureTime.split(":")[1])))}}function P(n,i){if(1&n&&e.YNc(0,M,9,15,"ion-item",4),2&n){const t=e.oxw();e.Q6J("ngForOf",t.subwayTimetableItems.down.slice(0,5-t.subwayRealtimeItems.down.length))}}function R(n,i){1&n&&(e.TgZ(0,"ion-item",0)(1,"ion-label",6),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"shuttle.out_of_service")))}let A=(()=>{class n{constructor(t){this.subwayService=t,this.subwayRealtimeItems={up:[],down:[]},this.subwayTimetableItems={up:[],down:[]},this.realtimeDelta={up:-1,down:-1},this.now=new Date,this.subwayService.subwayArrivalList.subscribe(a=>{void 0!==a[this.subwayRouteItemIndex]&&(this.routeName=this.getSubwayRouteCode(a[this.subwayRouteItemIndex]),this.stationName=this.getSubwayDestination(a[this.subwayRouteItemIndex].stationName),this.subwayRealtimeItems.up=a[this.subwayRouteItemIndex].realtime.filter(s=>"up"===s.heading),this.subwayRealtimeItems.down=a[this.subwayRouteItemIndex].realtime.filter(s=>"down"===s.heading),this.subwayRealtimeItems.up.length>0&&(this.realtimeDelta.up=this.subwayRealtimeItems.up[this.subwayRealtimeItems.up.length-1].remainedTime),this.subwayRealtimeItems.down.length>0&&(this.realtimeDelta.down=this.subwayRealtimeItems.down[this.subwayRealtimeItems.down.length-1].remainedTime),this.subwayTimetableItems.up=a[this.subwayRouteItemIndex].timetable.map(this.mapSubwayTimetableItem).filter(s=>"up"===s.heading&&this.getRemainedMinutes(s.departureTime)>this.realtimeDelta.up),this.subwayTimetableItems.down=a[this.subwayRouteItemIndex].timetable.map(this.mapSubwayTimetableItem).filter(s=>"down"===s.heading&&this.getRemainedMinutes(s.departureTime)>this.realtimeDelta.down),this.upTimetableURL="/subway/timetable?route="+this.routeName+"&station="+this.stationName+"&heading=up",this.downTimetableURL="/subway/timetable?route="+this.routeName+"&station="+this.stationName+"&heading=down")})}getSubwayRouteCode(t){switch(t.routeName){case"4\ud638\uc120":return"line4";case"\uc218\uc778\ubd84\ub2f9\uc120":return"suinbundang"}}getSubwayDestination(t){switch(t){case"\uc2e0\uc778\ucc9c":case"\uc778\ucc9c":return"incheon";case"\uc624\uc774\ub3c4":return"oido";case"\uc548\uc0b0":return"ansan";case"\uace0\uc0c9":return"gosaek";case"\uc8fd\uc804":return"jukjeon";case"\uc655\uc2ed\ub9ac":return"wangsimni";case"\uccad\ub7c9\ub9ac":return"cheongnyangni";case"\ub2f9\uace0\uac1c":return"danggogae";case"\ub178\uc6d0":return"nowon";case"\ud55c\uc131\ub300":return"hansung";case"\uc11c\uc6b8\uc5ed":return"seoul";case"\uc0ac\ub2f9":return"sadang";case"\uae08\uc815":return"geumjeong";default:return t}}getRemainedMinutes(t){let[a,s]=t.split(":");const r=new Date(this.now.getFullYear(),this.now.getMonth(),this.now.getDate(),parseInt(a),parseInt(s)).getTime()-this.now.getTime();return Math.floor(r/1e3/60)-5}mapSubwayTimetableItem(t){let a=t.departureTime;return t.departureTime.startsWith("00:")&&(a=t.departureTime.replace("00:","24:")),{departureTime:a,...t}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w.V))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-subway-card"]],inputs:{subwayRouteItemIndex:"subwayRouteItemIndex"},decls:28,vars:27,consts:[["lines","none"],[3,"href"],[3,"ngIf"],["lines","none",2,"margin-top","10px"],[4,"ngFor","ngForOf"],[1,"container"],[2,"text-align","center"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"ion-card-content")(6,"ion-list",0)(7,"ion-list-header")(8,"ion-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"ion-button",1),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.YNc(14,S,1,1,"ng-template",2),e.YNc(15,T,1,1,"ng-template",2),e.YNc(16,I,4,3,"ng-template",2),e.qZA(),e.TgZ(17,"ion-list",3)(18,"ion-list-header")(19,"ion-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"ion-button",1),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.YNc(25,Z,1,1,"ng-template",2),e.YNc(26,P,1,1,"ng-template",2),e.YNc(27,R,4,3,"ng-template",2),e.qZA()()()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,17,"subway.line."+a.routeName+".name")),e.xp6(5),e.Tol(a.routeName),e.xp6(1),e.Oqu(e.lcZ(10,19,"subway.heading.up")),e.xp6(2),e.Q6J("href",a.upTimetableURL),e.xp6(1),e.Oqu(e.lcZ(13,21,"subway.timetable.all")),e.xp6(2),e.Q6J("ngIf",a.subwayRealtimeItems.up.length>0),e.xp6(1),e.Q6J("ngIf",a.subwayTimetableItems.up.length>0&&a.subwayRealtimeItems.up.length<5),e.xp6(1),e.Q6J("ngIf",0===a.subwayRealtimeItems.up.length&&0===a.subwayTimetableItems.up.length),e.xp6(3),e.Tol(a.routeName),e.xp6(1),e.Oqu(e.lcZ(21,23,"subway.heading.down")),e.xp6(2),e.Q6J("href",a.downTimetableURL),e.xp6(1),e.Oqu(e.lcZ(24,25,"subway.timetable.all")),e.xp6(2),e.Q6J("ngIf",a.subwayRealtimeItems.down.length>0),e.xp6(1),e.Q6J("ngIf",a.subwayTimetableItems.down.length>0&&a.subwayRealtimeItems.down.length<5),e.xp6(1),e.Q6J("ngIf",0===a.subwayRealtimeItems.down.length&&0===a.subwayTimetableItems.down.length))},dependencies:[o.YG,o.PM,o.FN,o.Zi,o.Dq,o.Ie,o.Q$,o.q_,o.yh,o.yW,l.sg,l.O5,m.X$],styles:["ion-card[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding-bottom:0}ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:large}ion-list[_ngcontent-%COMP%]{width:100%}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{padding-left:0}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   .suinbundang[_ngcontent-%COMP%]{color:#fabe00}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   .line4[_ngcontent-%COMP%]{color:#00a4e3}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-align:start;font-size:large;margin-top:5px}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:5px;--padding-start: 0;--padding-end: 0}ion-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:medium}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--inner-padding-end: 0;--min-height: 16px}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;flex-direction:row}ion-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:medium;text-align:end;margin-top:5px;margin-bottom:5px}"]}),n})();const q=d.Ps`
  query GetPeriod($currentDate: String!) {
    shuttle {
      weekday (date: $currentDate),
    }
  }
`,v=d.Ps`
  query GetSubway($weekday: String!) {
    subway(routePair: [
      {stationName: "한대앞", routeName: "4호선"},
      {stationName: "한대앞", routeName: "수인분당선"},
    ]) {
      stationName, routeName,
      realtime {heading, updateTime, lastTrain, terminalStation, currentStation, remainedTime, status}
      timetable (weekday: $weekday) {
        heading, weekday, terminalStation, departureTime
      }
    }
  }
`,N=[{path:"",component:(()=>{class n{constructor(t,a,s,r){this.apollo=t,this.subwayService=a,this.toastController=s,this.loadingService=r,this.weekday="weekdays"}ngOnInit(){const t=new Date;this.subwayDateSubscription=this.apollo.watchQuery({query:q,variables:{currentDate:`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`}}).valueChanges.subscribe(({data:a})=>{this.weekday=a.shuttle.weekday,this.subwayDateSubscription?.unsubscribe(),this.subwayQuery=this.apollo.watchQuery({query:v,pollInterval:6e4,variables:{weekday:this.weekday,startTime:`${t.getHours()}:${t.getMinutes()}`}}),this.subwayTimetableSubscription=this.subwayQuery.valueChanges.subscribe(({data:r,loading:Y})=>{this.subwayService.setLoading(Y),this.subwayService.setSubwayArrivalList(r.subway)})}),this.subwayService.loading.subscribe(a=>{a&&this.loadingService.present("subway.loading","subway.loading").then(()=>{this.subwayService.loading.subscribe(s=>{s||this.loadingService.dismiss("subway.loading").then()})})})}ngOnDestroy(){this.subwayDateSubscription?.unsubscribe(),this.subwayTimetableSubscription?.unsubscribe()}refreshSubwayTimetable(t){this.subwayQuery.refetch().then(()=>{t.target.complete()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d._M),e.Y36(w.V),e.Y36(o.yF),e.Y36(_.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-shuttle"]],decls:15,vars:8,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["slot","fixed",3,"ionRefresh"],["subwayRouteItemIndex","0"],["subwayRouteItemIndex","1"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"ion-content",1)(6,"ion-header",2)(7,"ion-toolbar")(8,"ion-title",3),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"ion-refresher",4),e.NdJ("ionRefresh",function(r){return a.refreshSubwayTimetable(r)}),e._UZ(12,"ion-refresher-content"),e.qZA(),e._UZ(13,"app-subway-card",5)(14,"app-subway-card",6),e.qZA()),2&t&&(e.Q6J("translucent",!0),e.xp6(3),e.hij(" ",e.lcZ(4,4,"subway.title")," "),e.xp6(2),e.Q6J("fullscreen",!0),e.xp6(4),e.Oqu(e.lcZ(10,6,"subway.title")))},dependencies:[o.W2,o.Gu,o.nJ,o.Wo,o.wd,o.sr,A,m.X$],styles:["app-bus-card[_ngcontent-%COMP%]{width:100%}swiper[_ngcontent-%COMP%]{width:100%;height:420px}.slide-content[_ngcontent-%COMP%]{width:100%;height:400px}"]}),n})()}];let D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(N),p.Bz]}),n})();var L=u(9632),U=u(6472);let Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[o.Pc,l.ez,m.aw]}),n})(),J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[o.Pc,l.ez,y.u5,f.e,D,m.aw,L.kz,U.H,Q]}),n})()}}]);