version: '3'
services:
  hyuabot-redis:
    image: redis
    command: redis-server --port 6379
    labels:
      - "name=redis"
      - "mode=standalone"
    expose:
      - "6379"
  hyuabot-api:
      build: ./api
      environment:
        - REDIS_HOST=hyuabot-redis
        - BUS_API_KEY=${BUS_API_KEY}
        - METRO_API_KEY=${METRO_API_KEY}
      ports:
        - 38080:8080
      depends_on:
        - hyuabot-redis
  hyuabot-kakao:
      build: ./kakao
      environment:
        - API_HOST=hyuabot-api
      ports:
        - 38081:8081
      depends_on:
        - hyuabot-redis