"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1877],{1877:(x,d,r)=>{r.r(d),r.d(d,{SubwayTimetableModule:()=>Z});var n=r(5056),y=r(6895),g=r(4006),l=r(6753),b=r(7885),c=r(4964),e=r(6353),w=r(7658),h=r(4471);const T=function(i){return{destination:i}},p=function(i,o){return{hour:i,minute:o}};function S(i,o){if(1&i&&(e.TgZ(0,"ion-item",11)(1,"div",12)(2,"ion-text"),e._uU(3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"ion-text"),e._uU(7),e.ALo(8,"translate"),e.qZA()()()),2&i){const t=o.$implicit,a=o.index,s=e.oxw();e.Q6J("lines",a===s.subwayTimetableItems.length-1?"none":"inset"),e.xp6(3),e.Oqu(e.xi3(4,3,"subway.realtime.heading",e.VKq(11,T,e.lcZ(5,6,"subway.destination."+s.getSubwayDestination(t.terminalStation))))),e.xp6(4),e.Oqu(e.xi3(8,8,"subway.timetable.item.all",e.WLB(13,p,t.departureTime.split(":")[0],t.departureTime.split(":")[1])))}}const f=c.Ps`
    query GetPeriod($currentDate: String!) {
      shuttle {
        weekday (date: $currentDate),
      }
    }
  `,v=c.Ps`
  query GetSubwayTimetable($stationName: String!, $routeName: String!) {
    subway(routePair: [
      {stationName: $stationName, routeName: $routeName}
    ]) {
      timetable {
        heading,
        weekday,
        terminalStation,
        departureTime
      }
    }
  }`,P=[{path:"",component:(()=>{class i{constructor(t,a,s,u,m,k){this.route=t,this.apollo=a,this.toastController=s,this.translateService=u,this.subwayTimetableService=m,this.loadingService=k,this.subwayTimetableItems=[],this.now=new Date}ngOnInit(){const t=new Date;this.route.queryParams.subscribe(a=>{this.routeName=a.route,this.stop=a.stop,this.heading=a.heading}),this.subwayDateSubscription=this.apollo.watchQuery({query:f,variables:{currentDate:`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`}}).valueChanges.subscribe(({data:a})=>{this.subwayTimetableService.weekday.next(a.shuttle.weekday),this.subwayDateSubscription?.unsubscribe(),this.subwayTimetableQueryRef=this.apollo.watchQuery({query:v,pollInterval:6e4,variables:{stationName:"\ud55c\ub300\uc55e",routeName:this.getSubwayRouteCode(this.routeName)}}),this.subwayTimetableSubscription=this.subwayTimetableQueryRef.valueChanges.subscribe(({data:u,loading:m})=>{this.subwayTimetableService.setLoading(m),u.subway.length>0&&this.subwayTimetableService.setSubwayTimetable(u.subway[0].timetable),this.now=new Date})}),this.subwayTimetableService.loading.subscribe(a=>{a&&this.loadingService.present("shuttle.loading","shuttle.loading").then(()=>{this.subwayTimetableService.loading.subscribe(s=>{s||this.loadingService.dismiss("shuttle.loading").then()})})}),this.subwayTimetableService.weekday.subscribe(a=>{this.weekday=a,this.subwayTimetableItems=this.subwayTimetableService.subwayTimetable.value.filter(s=>s.weekday===a&&s.heading===this.heading).map(this.mapSubwayTimetableItem).sort(this.sortSubwayTimetableItem)}),this.subwayTimetableService.subwayTimetable.subscribe(a=>{this.subwayTimetableItems=a.filter(s=>s.weekday===this.subwayTimetableService.weekday.value&&s.heading===this.heading).map(this.mapSubwayTimetableItem).sort(this.sortSubwayTimetableItem)})}ngOnDestroy(){this.subwayDateSubscription?.unsubscribe(),this.subwayTimetableSubscription?.unsubscribe()}changeWeekday(){this.subwayTimetableService.weekday.next("weekdays"===this.subwayTimetableService.weekday.value?"weekends":"weekdays")}getSubwayRouteCode(t){switch(t){case"line4":return"4\ud638\uc120";case"suinbundang":return"\uc218\uc778\ubd84\ub2f9\uc120"}}getSubwayDestination(t){switch(t){case"\uc2e0\uc778\ucc9c":case"\uc778\ucc9c":return"incheon";case"\uc624\uc774\ub3c4":return"oido";case"\uc548\uc0b0":return"ansan";case"\uace0\uc0c9":return"gosaek";case"\uc8fd\uc804":return"jukjeon";case"\uc655\uc2ed\ub9ac":return"wangsimni";case"\uccad\ub7c9\ub9ac":return"cheongnyangni";case"\ub2f9\uace0\uac1c":return"danggogae";case"\ub178\uc6d0":return"nowon";case"\ud55c\uc131\ub300":return"hansung";case"\uc11c\uc6b8\uc5ed":return"seoul";case"\uc0ac\ub2f9":return"sadang";case"\uae08\uc815":return"geumjeong";default:return t}}mapSubwayTimetableItem(t){let a=t.departureTime;return t.departureTime.startsWith("00:")&&(a=t.departureTime.replace("00:","24:")),{...t,departureTime:a}}sortSubwayTimetableItem(t,a){return t.departureTime<a.departureTime?-1:t.departureTime>a.departureTime?1:0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(b.gz),e.Y36(c._M),e.Y36(n.yF),e.Y36(l.sK),e.Y36(w.n),e.Y36(h.b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-subway-timetable"]],decls:20,vars:15,consts:[[3,"translucent"],["slot","start"],["defaultHref","/subway"],[3,"fullscreen"],["collapse","condense"],["size","large"],["lines","inset"],[3,"lines",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed",2,"margin-bottom","10px","margin-right","10px"],[3,"click"],["name","swap-horizontal-outline"],[3,"lines"],[1,"container"]],template:function(t,a){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5),e.ALo(6,"translate"),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"ion-content",3)(9,"ion-header",4)(10,"ion-toolbar")(11,"ion-title",5),e._uU(12),e.ALo(13,"translate"),e.ALo(14,"translate"),e.qZA()()(),e.TgZ(15,"ion-list",6),e.YNc(16,S,9,16,"ion-item",7),e.qZA(),e.TgZ(17,"ion-fab",8)(18,"ion-fab-button",9),e.NdJ("click",function(){return a.changeWeekday()}),e._UZ(19,"ion-icon",10),e.qZA()()()),2&t&&(e.Q6J("translucent",!0),e.xp6(5),e.AsE(" ",e.lcZ(6,7,"subway.line."+a.routeName+".name")," (",e.lcZ(7,9,"subway.timetable."+a.weekday),") "),e.xp6(3),e.Q6J("fullscreen",!0),e.xp6(4),e.AsE(" ",e.lcZ(13,11,"subway.line."+a.routeName+".name")," (",e.lcZ(14,13,"subway.timetable."+a.weekday),") "),e.xp6(4),e.Q6J("ngForOf",a.subwayTimetableItems))},dependencies:[n.oU,n.Sm,n.W2,n.IJ,n.W4,n.Gu,n.gu,n.Ie,n.q_,n.yW,n.wd,n.sr,n.cs,y.sg,l.X$],styles:["ion-list[_ngcontent-%COMP%]{padding:20px;margin-bottom:60px;--ion-item-background: var(--ion-background-color)}ion-item[_ngcontent-%COMP%]{--padding-start: 0;--padding-end: 0;--inner-padding-end: 0}ion-item[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;flex-direction:row}ion-item[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .realtime[_ngcontent-%COMP%]{font-weight:700}ion-item[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:medium;text-align:end;margin-top:5px;margin-bottom:5px}"]}),i})()}];let A=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[b.Bz.forChild(P),b.Bz]}),i})(),Z=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[n.Pc,y.ez,g.u5,l.aw,A]}),i})()}}]);